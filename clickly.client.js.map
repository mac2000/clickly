{"version":3,"sources":["webpack:///clickly.client.js","webpack:///webpack/bootstrap 410db6b2e2c27ef160a3","webpack:///./src/utils.js","webpack:///./src/client.js"],"names":["clickly","modules","__webpack_require__","moduleId","installedModules","exports","module","i","l","call","m","c","d","name","getter","o","Object","defineProperty","configurable","enumerable","get","n","__esModule","object","property","prototype","hasOwnProperty","p","s","value","addDays","getTrackingId","document","querySelector","getAttribute","getClientId","window","cookie","split","map","trim","find","indexOf","parseInt","replace","shift","getDebug","localStorage","getItem","date","days","result","Date","setDate","getDate","buildQueryString","dateDaysAgo","dateToAnalyticsFormat","toISOString","dateFromAnalyticsFormat","str","obj","keys","k","encodeURIComponent","join","getNodeSelectorString","node","tagName","toLowerCase","id","className","traverseUp","items","push","parentNode","reverse","getNodeSelector","getNodeText","txt","innerText","length","substring","capturer","buildCollector","tid","cid","debug","event","data","v","t","cd1","cd2","now","cd3","Math","random","toString","ec","location","ea","target","el","title","url","navigator","sendBeacon","fetch","console","table","buildIFramerStylesheet","style","createElement","preventDefault","stopPropagation","type","iframer","click","parent","postMessage","mode","body","classList","add","remove","eventAction","addEventListener","removeEventListener","undefined","_utils","collect","head","appendChild"],"mappings":"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","file":"clickly.client.js","sourcesContent":["var clickly = clickly || {}; clickly[\"client\"] =\n/******/ (function(modules) { // webpackBootstrap\n/******/ \t// The module cache\n/******/ \tvar installedModules = {};\n/******/\n/******/ \t// The require function\n/******/ \tfunction __webpack_require__(moduleId) {\n/******/\n/******/ \t\t// Check if module is in cache\n/******/ \t\tif(installedModules[moduleId]) {\n/******/ \t\t\treturn installedModules[moduleId].exports;\n/******/ \t\t}\n/******/ \t\t// Create a new module (and put it into the cache)\n/******/ \t\tvar module = installedModules[moduleId] = {\n/******/ \t\t\ti: moduleId,\n/******/ \t\t\tl: false,\n/******/ \t\t\texports: {}\n/******/ \t\t};\n/******/\n/******/ \t\t// Execute the module function\n/******/ \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n/******/\n/******/ \t\t// Flag the module as loaded\n/******/ \t\tmodule.l = true;\n/******/\n/******/ \t\t// Return the exports of the module\n/******/ \t\treturn module.exports;\n/******/ \t}\n/******/\n/******/\n/******/ \t// expose the modules object (__webpack_modules__)\n/******/ \t__webpack_require__.m = modules;\n/******/\n/******/ \t// expose the module cache\n/******/ \t__webpack_require__.c = installedModules;\n/******/\n/******/ \t// define getter function for harmony exports\n/******/ \t__webpack_require__.d = function(exports, name, getter) {\n/******/ \t\tif(!__webpack_require__.o(exports, name)) {\n/******/ \t\t\tObject.defineProperty(exports, name, {\n/******/ \t\t\t\tconfigurable: false,\n/******/ \t\t\t\tenumerable: true,\n/******/ \t\t\t\tget: getter\n/******/ \t\t\t});\n/******/ \t\t}\n/******/ \t};\n/******/\n/******/ \t// getDefaultExport function for compatibility with non-harmony modules\n/******/ \t__webpack_require__.n = function(module) {\n/******/ \t\tvar getter = module && module.__esModule ?\n/******/ \t\t\tfunction getDefault() { return module['default']; } :\n/******/ \t\t\tfunction getModuleExports() { return module; };\n/******/ \t\t__webpack_require__.d(getter, 'a', getter);\n/******/ \t\treturn getter;\n/******/ \t};\n/******/\n/******/ \t// Object.prototype.hasOwnProperty.call\n/******/ \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n/******/\n/******/ \t// __webpack_public_path__\n/******/ \t__webpack_require__.p = \"\";\n/******/\n/******/ \t// Load entry module and return exports\n/******/ \treturn __webpack_require__(__webpack_require__.s = 1);\n/******/ })\n/************************************************************************/\n/******/ ([\n/* 0 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\nvar getTrackingId = exports.getTrackingId = function getTrackingId() {\n    return document.querySelector('script[data-clickly-tid]').getAttribute('data-clickly-tid');\n};\n\nvar getClientId = exports.getClientId = function getClientId() {\n    var value = window.document.cookie.split(';').map(function (c) {\n        return c.trim();\n    }).find(function (c) {\n        return c.indexOf('_ga=') === 0;\n    });\n    return value ? parseInt(value.replace(/_ga=GA\\d\\.\\d\\./, '').split('.').shift()) : null;\n};\n\nvar getDebug = exports.getDebug = function getDebug() {\n    return !!localStorage.getItem('debug');\n};\n\nvar addDays = exports.addDays = function addDays(date, days) {\n    var result = new Date(date);\n    result.setDate(result.getDate() + days);\n    return result;\n};\n\nvar dateDaysAgo = exports.dateDaysAgo = function dateDaysAgo(days) {\n    return addDays(new Date(), days);\n};\n\nvar dateToAnalyticsFormat = exports.dateToAnalyticsFormat = function dateToAnalyticsFormat(date) {\n    return date.toISOString().split('T').shift();\n};\n\nvar dateFromAnalyticsFormat = exports.dateFromAnalyticsFormat = function dateFromAnalyticsFormat(str) {\n    return new Date(str.replace(/(\\d{4})(\\d{2})(\\d{2})/, '$1-$2-$3'));\n};\n\nvar buildQueryString = function buildQueryString(obj) {\n    return Object.keys(obj).map(function (k) {\n        return k + '=' + encodeURIComponent(obj[k]);\n    }).join('&');\n};\n\nvar getNodeSelectorString = function getNodeSelectorString(node) {\n    return node.tagName.toLowerCase() + (node.id ? '#' + node.id : '') + (!!node.className ? '.' + node.className.trim().replace(/\\s+/g, '.') : '');\n};\n\nvar traverseUp = function traverseUp(node) {\n    var items = [];\n    do {\n        items.push(node);\n        node = node.parentNode;\n    } while (node && ['html', 'body'].indexOf(node.tagName.toLowerCase()) === -1);\n    return items.reverse();\n};\n\nvar getNodeSelector = function getNodeSelector(node) {\n    return traverseUp(node).map(getNodeSelectorString).join(' > ');\n};\n\nvar getNodeText = function getNodeText(node) {\n    var txt = node && node.innerText.trim() || node && node.value || '';\n    return txt.length > 250 ? txt.substring(0, 247) + '...' : txt;\n};\n\nvar buildCollector = exports.buildCollector = function buildCollector(tid, cid, debug) {\n    return function (event) {\n        var data = {\n            v: 1,\n            tid: tid,\n            cid: cid || '',\n            t: 'event',\n            cd1: cid || '',\n            cd2: Date.now(),\n            cd3: Date.now() + '.' + Math.random().toString(36).substring(5),\n            ec: window.location.toString(),\n            ea: event ? getNodeSelector(event.target) : 'view',\n            el: event ? getNodeText(event.target) : document.title\n        };\n\n        var url = 'https://www.google-analytics.com/collect?' + buildQueryString(data);\n\n        if (navigator.sendBeacon) {\n            navigator.sendBeacon(url);\n        } else {\n            fetch(url);\n        }\n\n        if (debug) {\n            console.table([data]);\n        }\n    };\n};\n\nvar buildIFramerStylesheet = exports.buildIFramerStylesheet = function buildIFramerStylesheet() {\n    var style = document.createElement('style');\n    style.innerText = 'body.capture *:hover {outline: 2px solid blue}';\n    return style;\n};\n\nvar capturer = function capturer(event) {\n    event.preventDefault();\n    event.stopPropagation();\n    if (event.type !== 'click') return;\n    var data = {\n        iframer: {\n            click: {\n                ec: window.location.toString(),\n                ea: getNodeSelector(event.target),\n                el: getNodeText(event.target)\n            }\n        }\n    };\n    parent.postMessage(data, '*');\n};\n\nvar iframer = exports.iframer = function iframer(event) {\n    if (!event || !event.data) return;\n    if (!event.data.hasOwnProperty('iframer')) return;\n\n    var data = event.data.iframer;\n\n    if (data.hasOwnProperty('mode')) {\n        if (data.mode === 'capture') {\n            document.body.classList.add('capture');\n        } else {\n            document.body.classList.remove('capture');\n        }\n        var eventAction = data.mode === 'capture' ? document.body.addEventListener : document.body.removeEventListener;\n\n        eventAction('mousedown', capturer, true);\n        eventAction('mouseup', capturer, true);\n        eventAction('click', capturer, true);\n    }\n};\n\n/***/ }),\n/* 1 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.debug = exports.cid = exports.tid = undefined;\n\nvar _utils = __webpack_require__(0);\n\n// Collector\n\nvar tid = exports.tid = (0, _utils.getTrackingId)();\nvar cid = exports.cid = (0, _utils.getClientId)();\nvar debug = exports.debug = (0, _utils.getDebug)();\n\nvar collect = (0, _utils.buildCollector)(tid, cid, debug);\n\ndocument.body.addEventListener('mousedown', collect, true);\ncollect();\n\n// iFramer\n\ndocument.head.appendChild((0, _utils.buildIFramerStylesheet)());\nwindow.addEventListener('message', _utils.iframer, false);\n\n/***/ })\n/******/ ]);\n\n\n// WEBPACK FOOTER //\n// clickly.client.js"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 1);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap 410db6b2e2c27ef160a3","export const getTrackingId = () => document.querySelector('script[data-clickly-tid]').getAttribute('data-clickly-tid')\n\nexport const getClientId = () => {\n    var value = window.document.cookie\n        .split(';')\n        .map(c => c.trim())\n        .find(c => c.indexOf('_ga=') === 0)\n    return value ? parseInt(value.replace(/_ga=GA\\d\\.\\d\\./, '').split('.').shift()) : null\n}\n\nexport const getDebug = () => !!localStorage.getItem('debug')\n\nexport const addDays = (date, days) => {\n    const result = new Date(date)\n    result.setDate(result.getDate() + days)\n    return result\n}\n\nexport const dateDaysAgo = days => addDays(new Date(), days)\n\nexport const dateToAnalyticsFormat = date => date.toISOString().split('T').shift()\n\nexport const dateFromAnalyticsFormat = str => new Date(str.replace(/(\\d{4})(\\d{2})(\\d{2})/, '$1-$2-$3'))\n\nconst buildQueryString = obj => Object.keys(obj).map(k => k + '=' + encodeURIComponent(obj[k])).join('&')\n\nconst getNodeSelectorString = node => node.tagName.toLowerCase() + (node.id ? '#' + node.id : '') + (!!node.className ? '.' + node.className.trim().replace(/\\s+/g, '.') : '')\n\nconst traverseUp = node => {\n    const items = []\n    do {\n        items.push(node)\n        node = node.parentNode\n    } while(node && ['html', 'body'].indexOf(node.tagName.toLowerCase()) === -1)\n    return items.reverse()\n}\n\nconst getNodeSelector = node => traverseUp(node).map(getNodeSelectorString).join(' > ')\n\nconst getNodeText = node => {\n    const txt = node && node.innerText.trim() || node && node.value || ''\n    return txt.length > 250 ? txt.substring(0, 247) + '...' : txt\n}\n\nexport const buildCollector = (tid, cid, debug) => event => {\n    const data = {\n        v: 1,\n        tid,\n        cid: cid || '',\n        t: 'event',\n        cd1: cid || '',\n        cd2: Date.now(),\n        cd3: Date.now() + '.' + Math.random().toString(36).substring(5),\n        ec: window.location.toString(),\n        ea: event ? getNodeSelector(event.target) : 'view',\n        el: event ? getNodeText(event.target) : document.title\n    }\n\n    const url = 'https://www.google-analytics.com/collect?' + buildQueryString(data)\n\n    if (navigator.sendBeacon) {\n        navigator.sendBeacon(url)\n    } else {\n        fetch(url)\n    }\n\n    if (debug) {\n        console.table([data])\n    }\n}\n\nexport const buildIFramerStylesheet = () => {\n    const style = document.createElement('style')\n    style.innerText = 'body.capture *:hover {outline: 2px solid blue}'\n    return style\n}\n\nconst capturer = event => {\n    event.preventDefault()\n    event.stopPropagation()\n    if (event.type !== 'click') return\n    const data = {\n        iframer: {\n            click: {\n                ec: window.location.toString(),\n                ea: getNodeSelector(event.target),\n                el: getNodeText(event.target)\n            }\n        }\n    }\n    parent.postMessage(data, '*')\n}\n\nexport const iframer = event => {\n    if (!event || !event.data) return\n    if (!event.data.hasOwnProperty('iframer')) return\n\n    const data = event.data.iframer\n\n    if (data.hasOwnProperty('mode')) {\n        if (data.mode === 'capture') {\n            document.body.classList.add('capture')\n        } else {\n            document.body.classList.remove('capture')\n        }\n        const eventAction = data.mode === 'capture'\n            ? document.body.addEventListener\n            : document.body.removeEventListener\n\n        eventAction('mousedown', capturer, true)\n        eventAction('mouseup', capturer, true)\n        eventAction('click', capturer, true)\n    }\n}\n\n\n// WEBPACK FOOTER //\n// ./src/utils.js","import {getTrackingId, getClientId, getDebug, buildCollector, buildIFramerStylesheet, iframer} from './utils'\n\n// Collector\n\nexport const tid = getTrackingId()\nexport const cid = getClientId()\nexport const debug = getDebug()\n\nconst collect = buildCollector(tid, cid, debug)\n\ndocument.body.addEventListener('mousedown', collect, true);\ncollect()\n\n// iFramer\n\ndocument.head.appendChild(buildIFramerStylesheet())\nwindow.addEventListener('message', iframer, false)\n\n\n\n// WEBPACK FOOTER //\n// ./src/client.js"],"sourceRoot":""}